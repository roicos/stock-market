<% include partial/header %>

<div class="row">
    <div class="col-sm-1"></div>
    <div id="graph" class="col-sm-10">Awesome graph will be here!</div>
    <div class="col-sm-1"></div>
</div>

<script>
    google.charts.load('current', {'packages':['annotationchart']});
    google.charts.setOnLoadCallback(drawChart);

    function drawChart() {
        var data = new google.visualization.DataTable();
        data.addColumn('date', 'Date');
        data.addColumn('number', 'Kepler-22b mission');
        data.addColumn('string', 'Kepler title');
        data.addColumn('string', 'Kepler text');
        data.addColumn('number', 'Gliese 163 mission');
        data.addColumn('string', 'Gliese title');
        data.addColumn('string', 'Gliese text');
        data.addRows([
          [new Date(2314, 2, 15), 12400, undefined, undefined,
                                  10645, undefined, undefined],
          [new Date(2314, 2, 16), 24045, 'Lalibertines', 'First encounter',
                                  12374, undefined, undefined],
          [new Date(2314, 2, 17), 35022, 'Lalibertines', 'They are very tall',
                                  15766, 'Gallantors', 'First Encounter'],
          [new Date(2314, 2, 18), 12284, 'Lalibertines', 'Attack on our crew!',
                                  34334, 'Gallantors', 'Statement of shared principles'],
          [new Date(2314, 2, 19), 8476, 'Lalibertines', 'Heavy casualties',
                                  66467, 'Gallantors', 'Mysteries revealed'],
          [new Date(2314, 2, 20), 0, 'Lalibertines', 'All crew lost',
                                  79463, 'Gallantors', 'Omniscience achieved']
    ]);

    var chart = new google.visualization.AnnotationChart(document.getElementById('graph'));

        var options = {
          displayAnnotations: false
        };

        chart.draw(data, options);
    }


</script>

<div class="row">
    <ul id="stocks" class="col-md-12">
        <% for (var i=0; i < data.length; i++){%>
        <li class="col-md-4 col-sm-6">
            <div class="stock-wrapper">
                <h4><%= data[i]%></h4>
                <form action="removeStock" method="post">
                    <input type="hidden" name="code" value="<%=data[i]%>"/>
                    <span class="delStockIcon glyphicon glyphicon-remove-circle"></span>
                    <input type="submit" class="delStock" value="" onmouseout="mouseoutHandler(this)" onmouseover="mouseoverHandler(this)"/>
                </form>
            </div>
        </li>
        <%}%>
        <li class="col-md-4 col-sm-6" id="addStock">
            <div class="stock-wrapper">
                <form action="addStock" method="post">
                    <div class="input-group">
                        <input class="form-control" type="text" name="code"/>
                        <span class="input-group-btn">
                            <input class="btn" type="submit" value="add"/>
                        </span>
                    </div>
                </form>
            </div>

        </li>
    </ul>
</div>

<script>
    function mouseoverHandler(elem){
        var parent = elem.parentNode;
        var icon = parent.getElementsByTagName("span")[0];
        icon.style.color =  "#da8d77";
    };

    function mouseoutHandler(elem){
        var parent = elem.parentNode;
        var icon = parent.getElementsByTagName("span")[0];
        icon.style.color =  "#96aab7";
    };
</script>

<% include partial/footer %>